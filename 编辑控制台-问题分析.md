# 编辑控制台脚本问题分析

## 1. 文件类型与扩展名错误

| 项目 | 说明 |
|------|------|
| **当前** | 文件名为 `编辑控制台.py`，但内容是 **React (JSX)** 代码 |
| **问题** | 无法用 `python 编辑控制台.py` 运行；以 `.py` 存放前端代码会造成误解 |
| **建议** | 若保留 React：改名为 `.jsx` 并放入前端工程；若要做“Python 控制台”：应重写为真正的 Python 脚本 |

---

## 2. 缺少运行环境

- 项目目录下**没有** `package.json`、没有 React/Vite 等前端工程
- 这段 React 代码**无法直接运行**，需要先 `npm init`、安装 `react`、`lucide-react` 等依赖，并用打包工具（如 Vite）构建后在浏览器打开

---

## 3. 与 tanjing.json 的对接方式

| 项目 | 说明 |
|------|------|
| **当前** | 只能通过「选择 JSON 文件」上传来加载数据 |
| **问题** | 无法直接打开项目里的 `tanjing.json`，每次审阅都要手动选文件 |
| **导出** | 下载文件名为 `sutra_db_updated.json`，与源文件 `tanjing.json` 不一致，容易混淆 |

---

## 4. 数据与边界情况

- **tanjing.json 结构**：与脚本中使用的字段一致（`tag`, `scene_category`, `emotion_state`, `dimension_v`, `dimension_e`, `sutra_title`, `sutra_text`, `ui_translation`, `ui_mapping`, `ui_action`, `ai_instruction`），无结构性问题
- **潜在问题**：
  - 若某条缺少字段（如 `ui_mapping`），会显示为空白，保存后可能写入 `undefined` 或缺失键
  - 未保存就翻页会丢失当前页修改（底部按钮已先保存再翻页，但若用户用其他方式切换可能仍会丢）

---

## 5. 文案不一致

- 界面提示「请上传你的 sutra_db.json 文件」，实际要审阅的是 **tanjing.json**，建议统一为「tanjing.json」或「坛经 JSON」

---

## 建议方案

### 方案 A：单文件 HTML 审阅台（不依赖 Node）

- 做一个**单 HTML 文件**，内嵌脚本，用 `fetch` 或 `<input type="file">` 加载 JSON
- 若通过本地静态服务器打开（如 `python -m http.server`），可默认请求 `tanjing.json`，无需每次上传
- 导出时建议命名为 `tanjing_updated.json`

### 方案 B：Python 编辑控制台（真正用 .py）

- 用 **Python** 写一个编辑控制台，直接读写 `tanjing.json`（例如 tkinter GUI 或简单的 Flask 小应用）
- 这样 `python 编辑控制台.py` 即可运行，与「审阅修改 tanjing.json」的目标一致，且无需前端构建

你可以选择：**A（浏览器单页）**、**B（Python 桌面/本地服务）**，或两个都做。确认后我可以按你的选择改/写具体代码。
